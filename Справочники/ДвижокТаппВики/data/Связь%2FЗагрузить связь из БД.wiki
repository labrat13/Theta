++ Связь/Загрузить связь из БД
[template: ШаблонСвойства]
[//В РАЗРАБОТКЕ]

См. [//]
Тип: 

 
+++Дополнительная информация


+++Разработка, обсуждение и материалы
* Создать экземпляр связи, заполнить данными, вставить в список контейнера и списки связей ячеек (если ячейки загружены в память и имеют списки связей).
[//MCellA]: можно только в контейнер, а зачем они там? Не добавлять, только в список связей ячейки, он все равно одноразовый.
[//MCellB], [//MCellBds]: контейнер, список ячейки, список конечной ячейки, если она загружена и не [//MCellA] или [//MCellBt]. 

Вероятно, загружать связи ячейки в [//КоллекцияСвязейКонтейнера] следует при первом востребовании. 
А до этого держать пустой список? А если первым обращением будет добавление связи - связь добавляется в список и записывается в таблицу. А если связь временная, то только добавляется в список. А при чтении списка в память загружаются связи, которых в списке еще нет. 

При загрузке связи нужно убедиться, что она отсутствует в контейнере. Можно проверить связи ячеек. Но лучше бы иметь функцию поиска и в [//КоллекцияСвязейКонтейнера]. Функция должна быть очень быстрой.

Загрузка связи состоит из выбора параметров поиска связи, получения списка записей связей, создание списка связей, 
помещение связей в список связей контейнера, добавление в ячейки, ... При этом надо определить, существуют ли уже эти связи в списке контейнера. Проще всего поискать в ячейках связей. Если ни одна из ячеек не загружена в память, то связи не загружены. Если загруженная ячейка [//MCellA], ее связи не загружаются в память, поиск по ее связям ничего не даст, поэтому считать ее незагруженной. Если загруженная ячейка [//MCellB], ее связи загружены в память (поскольку они загружаются при первом требовании, то надо затребовать связи ячейки перед поиском связей в списке связей контейнера).

Для [//MCellA] связи сейчас читаются из таблицы. Но список связей при этом не может содержать временных связей, так как они хранятся в памяти. Следовательно, надо возвращать список связей в памяти и в таблице.
При создании связи с ячейкой постоянные связи записываются в таблицу, временные в память.

Для [//MCellB] связи хранятся в списке в памяти. При загрузке ячейки вызовом getCell связи из таблицы добавляются в ячейку и в контейнер. Если связь уже есть в контейнере, не загружать ее туда. 

Ячейки можно загрузить в память вызовом getCell. Для [//MCellB] должны загружаться и связи. Для [//MCellA] связи загружать некуда, кроме контейнера. А нафик они там?
Остальные функции не загружают ячейки в контейнер, а только предоставляют их для поиска. 